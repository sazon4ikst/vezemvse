!function(a){"use strict";function b(b){var c=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(b.target).ajaxSubmit(c))}function c(b){var c=b.target,d=a(c);if(!d.is("[type=submit],[type=image]")){var e=d.closest("[type=submit]");if(0===e.length)return;c=e[0]}var f=this;if(f.clk=c,"image"==c.type)if(void 0!==b.offsetX)f.clk_x=b.offsetX,f.clk_y=b.offsetY;else if("function"==typeof a.fn.offset){var g=d.offset();f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top}else f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop;setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)}function d(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var e={};e.fileapi=void 0!==a("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData;var f=!!a.fn.prop;a.fn.attr2=function(){if(!f)return this.attr.apply(this,arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)},a.fn.ajaxSubmit=function(b){function c(c){var d,e,f=a.param(c,b.traditional).split("&"),g=f.length,h=[];for(d=0;g>d;d++)f[d]=f[d].replace(/\+/g," "),e=f[d].split("="),h.push([decodeURIComponent(e[0]),decodeURIComponent(e[1])]);return h}function g(d){for(var e=new FormData,f=0;d.length>f;f++)e.append(d[f].name,d[f].value);if(b.extraData){var g=c(b.extraData);for(f=0;g.length>f;f++)g[f]&&e.append(g[f][0],g[f][1])}b.data=null;var h=a.extend(!0,{},a.ajaxSettings,b,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});b.uploadProgress&&(h.xhr=function(){var c=a.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(a){var c=0,d=a.loaded||a.position,e=a.total;a.lengthComputable&&(c=Math.ceil(100*(d/e))),b.uploadProgress(a,d,e,c)},!1),c}),h.data=null;var j=h.beforeSend;return h.beforeSend=function(a,c){c.data=b.formData?b.formData:e,j&&j.call(this,a,c)},a.ajax(h)}function h(c){function e(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(c){d("cannot get iframe.contentWindow document: "+c)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(c){d("cannot get iframe.contentDocument: "+c),b=a.document}return b}function g(){function b(){try{var a=e(r).readyState;d("state = "+a),a&&"uninitialized"==a.toLowerCase()&&setTimeout(b,50)}catch(c){d("Server abort: ",c," (",c.name,")"),h(A),w&&clearTimeout(w),w=void 0}}var c=l.attr2("target"),f=l.attr2("action");x.setAttribute("target",o),(!i||/post/i.test(i))&&x.setAttribute("method","POST"),f!=m.url&&x.setAttribute("action",m.url),m.skipEncodingOverride||i&&!/post/i.test(i)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(w=setTimeout(function(){v=!0,h(z)},m.timeout));var g=[];try{if(m.extraData)for(var j in m.extraData)m.extraData.hasOwnProperty(j)&&(a.isPlainObject(m.extraData[j])&&m.extraData[j].hasOwnProperty("name")&&m.extraData[j].hasOwnProperty("value")?g.push(a('<input type="hidden" name="'+m.extraData[j].name+'">').val(m.extraData[j].value).appendTo(x)[0]):g.push(a('<input type="hidden" name="'+j+'">').val(m.extraData[j]).appendTo(x)[0]));m.iframeTarget||q.appendTo("body"),r.attachEvent?r.attachEvent("onload",h):r.addEventListener("load",h,!1),setTimeout(b,15);try{x.submit()}catch(k){var n=document.createElement("form").submit;n.apply(x)}}finally{x.setAttribute("action",f),c?x.setAttribute("target",c):l.removeAttr("target"),a(g).remove()}}function h(b){if(!s.aborted&&!F){if(E=e(r),E||(d("cannot access response document"),b=A),b===z&&s)return s.abort("timeout"),void y.reject(s,"timeout");if(b==A&&s)return s.abort("server abort"),void y.reject(s,"error","server abort");if(E&&E.location.href!=m.iframeSrc||v){r.detachEvent?r.detachEvent("onload",h):r.removeEventListener("load",h,!1);var c,f="success";try{if(v)throw"timeout";var g="xml"==m.dataType||E.XMLDocument||a.isXMLDoc(E);if(d("isXml="+g),!g&&window.opera&&(null===E.body||!E.body.innerHTML)&&--G)return d("requeing onLoad callback, DOM not available"),void setTimeout(h,250);var i=E.body?E.body:E.documentElement;s.responseText=i?i.innerHTML:null,s.responseXML=E.XMLDocument?E.XMLDocument:E,g&&(m.dataType="xml"),s.getResponseHeader=function(a){var b={"content-type":m.dataType};return b[a.toLowerCase()]},i&&(s.status=Number(i.getAttribute("status"))||s.status,s.statusText=i.getAttribute("statusText")||s.statusText);var j=(m.dataType||"").toLowerCase(),k=/(json|script|text)/.test(j);if(k||m.textarea){var l=E.getElementsByTagName("textarea")[0];if(l)s.responseText=l.value,s.status=Number(l.getAttribute("status"))||s.status,s.statusText=l.getAttribute("statusText")||s.statusText;else if(k){var o=E.getElementsByTagName("pre")[0],p=E.getElementsByTagName("body")[0];o?s.responseText=o.textContent?o.textContent:o.innerText:p&&(s.responseText=p.textContent?p.textContent:p.innerText)}}else"xml"==j&&!s.responseXML&&s.responseText&&(s.responseXML=H(s.responseText));try{D=J(s,j,m)}catch(t){f="parsererror",s.error=c=t||f}}catch(t){d("error caught: ",t),f="error",s.error=c=t||f}s.aborted&&(d("upload aborted"),f=null),s.status&&(f=s.status>=200&&300>s.status||304===s.status?"success":"error"),"success"===f?(m.success&&m.success.call(m.context,D,"success",s),y.resolve(s.responseText,"success",s),n&&a.event.trigger("ajaxSuccess",[s,m])):f&&(void 0===c&&(c=s.statusText),m.error&&m.error.call(m.context,s,f,c),y.reject(s,"error",c),n&&a.event.trigger("ajaxError",[s,m,c])),n&&a.event.trigger("ajaxComplete",[s,m]),n&&!--a.active&&a.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,s,f),F=!0,m.timeout&&clearTimeout(w),setTimeout(function(){m.iframeTarget?q.attr("src",m.iframeSrc):q.remove(),s.responseXML=null},100)}}}var j,k,m,n,o,q,r,s,t,u,v,w,x=l[0],y=a.Deferred();if(y.abort=function(a){s.abort(a)},c)for(k=0;p.length>k;k++)j=a(p[k]),f?j.prop("disabled",!1):j.removeAttr("disabled");if(m=a.extend(!0,{},a.ajaxSettings,b),m.context=m.context||m,o="jqFormIO"+(new Date).getTime(),m.iframeTarget?(q=a(m.iframeTarget),u=q.attr2("name"),u?o=u:q.attr2("name",o)):(q=a('<iframe name="'+o+'" src="'+m.iframeSrc+'" />'),q.css({position:"absolute",top:"-1000px",left:"-1000px"})),r=q[0],s={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(b){var c="timeout"===b?"timeout":"aborted";d("aborting upload... "+c),this.aborted=1;try{r.contentWindow.document.execCommand&&r.contentWindow.document.execCommand("Stop")}catch(e){}q.attr("src",m.iframeSrc),s.error=c,m.error&&m.error.call(m.context,s,c,b),n&&a.event.trigger("ajaxError",[s,m,c]),m.complete&&m.complete.call(m.context,s,c)}},n=m.global,n&&0===a.active++&&a.event.trigger("ajaxStart"),n&&a.event.trigger("ajaxSend",[s,m]),m.beforeSend&&m.beforeSend.call(m.context,s,m)===!1)return m.global&&a.active--,y.reject(),y;if(s.aborted)return y.reject(),y;t=x.clk,t&&(u=t.name,u&&!t.disabled&&(m.extraData=m.extraData||{},m.extraData[u]=t.value,"image"==t.type&&(m.extraData[u+".x"]=x.clk_x,m.extraData[u+".y"]=x.clk_y)));var z=1,A=2,B=a("meta[name=csrf-token]").attr("content"),C=a("meta[name=csrf-param]").attr("content");C&&B&&(m.extraData=m.extraData||{},m.extraData[C]=B),m.forceSync?g():setTimeout(g,10);var D,E,F,G=50,H=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},I=a.parseJSON||function(a){return window.eval("("+a+")")},J=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f="xml"===c||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&"parsererror"===g.documentElement.nodeName&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),"string"==typeof g&&("json"===c||!c&&e.indexOf("json")>=0?g=I(g):("script"===c||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g};return y}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var i,j,k,l=this;"function"==typeof b?b={success:b}:void 0===b&&(b={}),i=b.type||this.attr2("method"),j=b.url||this.attr2("action"),k="string"==typeof j?a.trim(j):"",k=k||window.location.href||"",k&&(k=(k.match(/^([^#]+)/)||[])[1]),b=a.extend(!0,{url:k,success:a.ajaxSettings.success,type:i||a.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);var m={};if(this.trigger("form-pre-serialize",[this,b,m]),m.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&b.beforeSerialize(this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var n=b.traditional;void 0===n&&(n=a.ajaxSettings.traditional);var o,p=[],q=this.formToArray(b.semantic,p);if(b.data&&(b.extraData=b.data,o=a.param(b.data,n)),b.beforeSubmit&&b.beforeSubmit(q,this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[q,this,b,m]),m.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var r=a.param(q,n);o&&(r=r?r+"&"+o:o),"GET"==b.type.toUpperCase()?(b.url+=(b.url.indexOf("?")>=0?"&":"?")+r,b.data=null):b.data=r;var s=[];if(b.resetForm&&s.push(function(){l.resetForm()}),b.clearForm&&s.push(function(){l.clearForm(b.includeHidden)}),!b.dataType&&b.target){var t=b.success||function(){};s.push(function(c){var d=b.replaceTarget?"replaceWith":"html";a(b.target)[d](c).each(t,arguments)})}else b.success&&s.push(b.success);if(b.success=function(a,c,d){for(var e=b.context||this,f=0,g=s.length;g>f;f++)s[f].apply(e,[a,c,d||l,l])},b.error){var u=b.error;b.error=function(a,c,d){var e=b.context||this;u.apply(e,[a,c,d,l])}}if(b.complete){var v=b.complete;b.complete=function(a,c){var d=b.context||this;v.apply(d,[a,c,l])}}var w=a("input[type=file]:enabled",this).filter(function(){return""!==a(this).val()}),x=w.length>0,y="multipart/form-data",z=l.attr("enctype")==y||l.attr("encoding")==y,A=e.fileapi&&e.formdata;d("fileAPI :"+A);var B,C=(x||z)&&!A;b.iframe!==!1&&(b.iframe||C)?b.closeKeepAlive?a.get(b.closeKeepAlive,function(){B=h(q)}):B=h(q):B=(x||z)&&A?g(q):a.ajax(b),l.removeData("jqxhr").data("jqxhr",B);for(var D=0;p.length>D;D++)p[D]=null;return this.trigger("form-submit-notify",[this,b]),this},a.fn.ajaxForm=function(e){if(e=e||{},e.delegation=e.delegation&&a.isFunction(a.fn.on),!e.delegation&&0===this.length){var f={s:this.selector,c:this.context};return!a.isReady&&f.s?(d("DOM not ready, queuing ajaxForm"),a(function(){a(f.s,f.c).ajaxForm(e)}),this):(d("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return e.delegation?(a(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,e,b).on("click.form-plugin",this.selector,e,c),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,b).bind("click.form-plugin",e,c)},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(b,c){var d=[];if(0===this.length)return d;var f=this[0],g=b?f.getElementsByTagName("*"):f.elements;if(!g)return d;var h,i,j,k,l,m,n;for(h=0,m=g.length;m>h;h++)if(l=g[h],j=l.name,j&&!l.disabled)if(b&&f.clk&&"image"==l.type)f.clk==l&&(d.push({name:j,value:a(l).val(),type:l.type}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}));else if(k=a.fieldValue(l,!0),k&&k.constructor==Array)for(c&&c.push(l),i=0,n=k.length;n>i;i++)d.push({name:j,value:k[i]});else if(e.fileapi&&"file"==l.type){c&&c.push(l);var o=l.files;if(o.length)for(i=0;o.length>i;i++)d.push({name:j,value:o[i],type:l.type});else d.push({name:j,value:"",type:l.type})}else null!==k&&void 0!==k&&(c&&c.push(l),d.push({name:j,value:k,type:l.type,required:l.required}));if(!b&&f.clk){var p=a(f.clk),q=p[0];j=q.name,j&&!q.disabled&&"image"==q.type&&(d.push({name:j,value:p.val()}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}))}return d},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var d=this.name;if(d){var e=a.fieldValue(this,b);if(e&&e.constructor==Array)for(var f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&void 0!==e&&c.push({name:this.name,value:e})}}),a.param(c)},a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;e>d;d++){var f=this[d],g=a.fieldValue(f,b);null===g||void 0===g||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(c,g):c.push(g))}return c},a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||b.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!b.checked||("submit"==e||"image"==e)&&b.form&&b.form.clk!=b||"select"==f&&-1==b.selectedIndex))return null;if("select"==f){var g=b.selectedIndex;if(0>g)return null;for(var h=[],i=b.options,j="select-one"==e,k=j?g+1:i.length,l=j?g:0;k>l;l++){var m=i[l];if(m.selected){var n=m.value;if(n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),j)return n;h.push(n)}}return h}return a(b).val()},a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})},a.fn.clearFields=a.fn.clearInputs=function(b){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone(!0)):a(this).val(""):b&&(b===!0&&/hidden/.test(d)||"string"==typeof b&&a(this).is(b))&&(this.value="")})},a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return void 0===b&&(b=!0),this.each(function(){var c=this.type;if("checkbox"==c||"radio"==c)this.checked=b;else if("option"==this.tagName.toLowerCase()){var d=a(this).parent("select");b&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=b}})},a.fn.ajaxSubmit.debug=!1}("undefined"!=typeof jQuery?jQuery:window.Zepto);var msBeautify=msBeautify||{};!function(b){function S(e,d){var l,H,t,k;d=b.extend(!0,{byJson:{data:null,selectedIndex:0,name:null,size:0,multiple:!1,width:250},mainCSS:"dd",height:120,visibleRows:7,rowHeight:0,showIcon:!0,zIndex:9999,useSprite:!1,animStyle:"slideDown",event:"click",openDirection:"auto",jsonTitle:!0,style:"",disabledOpacity:.7,disabledOptionEvents:!0,childWidth:0,enableCheckbox:!1,checkboxNameSuffix:"_mscheck",append:"",prepend:"",reverseMode:!0,roundedCorner:!0,enableAutoFilter:!1,on:{create:null,open:null,close:null,add:null,remove:null,change:null,blur:null,click:null,dblclick:null,mousemove:null,mouseover:null,mouseout:null,focus:null,mousedown:null,mouseup:null}},d);var q=this,S={postElementHolder:"_msddHolder",postID:"_msdd",postTitleID:"_title",postTitleTextID:"_titleText",postChildID:"_child"};H=d.mainCSS,t="enabled",k="selected",l="_msddli_";var u=!1,x=!1,n=!1,T={},J={},K=!1,C=!1,A=!1,L=null,I=!1,M,$=document,N=window.navigator.userAgent,pa=N.match(/msie/i);d.reverseMode=d.reverseMode.toString(),d.roundedCorner=d.roundedCorner.toString();var aa=function(a){return"[object Array]"==Object.prototype.toString.call(a)?!0:!1},h=function(a){return void 0===T[a]&&(T[a]=$.getElementById(a)),T[a]},z=function(a){var c=m("postChildID");return b("#"+c+" li."+l).index(a)},qa=function(){if(d.byJson.data){var a=["description","image","title"];try{e.id||(e.id="dropdown"+msBeautify.counter),d.byJson.data=eval(d.byJson.data);var c="msdropdown"+msBeautify.counter++,f={};f.id=c,f.name=d.byJson.name||e.id,0<d.byJson.size&&(f.size=d.byJson.size),f.multiple=d.byJson.multiple;for(var g=s("select",f),c=0;c<d.byJson.data.length;c++){var p=d.byJson.data[c],k=new Option(p.text,p.value),m;for(m in p)if("text"!=m.toLowerCase()){var l=-1!=b.inArray(m.toLowerCase(),a)?"data-":"";k.setAttribute(l+m,p[m])}g.options[c]=k}h(e.id).appendChild(g),g.selectedIndex=d.byJson.selectedIndex,b(g).css({width:d.byJson.width+"px"}),e=g}catch(r){throw"There is an error in json data."}}},m=function(a){return e+S[a]},ba=function(a){return void 0===a.style?"":a.style.cssText},D=function(a){var c="",f="",g="",e=-1,h="",m="",k="",l;if(void 0!==a){if(e=a.title||"",""!=e){if((h=/^\{.*\}$/.test(e))&&d.jsonTitle)var q=eval("["+e+"]");f=h&&d.jsonTitle?q[0].title:f,g=h&&d.jsonTitle?q[0].description:g,c=h&&d.jsonTitle?q[0].image:e,k=h&&d.jsonTitle?q[0].imagecss:k}h=a.text||"",e=a.value||"",m=a.className||"",f=b(a).prop("data-title")||b(a).data("title")||f||"",g=b(a).prop("data-description")||b(a).data("description")||g||"",c=b(a).prop("data-image")||b(a).data("image")||c||"",k=b(a).prop("data-imagecss")||b(a).data("imagecss")||k||"",l=b(a).index()}return{image:c,title:f,description:g,value:e,text:h,className:m,imagecss:k,index:l}},s=function(a,b,c){if(a=$.createElement(a),b)for(var d in b)switch(d){case"style":a.style.cssText=b[d];break;default:a[d]=b[d]}return c&&(a.innerHTML=c),a},U=function(a){var b={},c=ba(a);0<c.length&&(b.style=c),c=a.disabled?"disabled":t,c=a.selected?c+" "+k:c,c=c+" "+l,b.className=c,0!=d.useSprite&&(b.className=c+" "+a.className),b=s("li",b),c=D(a),""!=c.title&&(b.title=c.title);var f=c.image;if(""!=f&&d.showIcon){var g=s("img");g.src=f,""!=c.imagecss&&(g.className=c.imagecss+" ")}if(""!=c.description)var h=s("span",{className:"description"},c.description);return c=s("span",{className:"ddlabel"},a.text||""),!0===d.enableCheckbox&&(f=s("input",{type:"checkbox",name:e+d.checkboxNameSuffix+"[]",value:a.value||"",className:"checkbox"}),b.appendChild(f),!0===d.enableCheckbox&&(f.checked=a.selected?!0:!1)),g&&b.appendChild(g),b.appendChild(c),h?b.appendChild(h):g&&(g.className+="fnone"),a=s("div",{className:"clear"}),b.appendChild(a),b},w=function(a){var c=m("postChildID");if(a)return-1==a?b("#"+c).css({height:"auto",overflow:"auto"}):b("#"+c).css("height",a+"px"),!1;var f;if(a=h(e).options.length,a>d.visibleRows||d.visibleRows){f=b("#"+c+" li:first");var g=parseInt(f.css("padding-bottom"))+parseInt(f.css("padding-top"));0===d.rowHeight&&(b("#"+c).css({visibility:"hidden",display:"block"}),d.rowHeight=Math.ceil(f.height()),b("#"+c).css({visibility:"visible"}),u&&!0!==d.enableCheckbox||b("#"+c).css({display:"none"})),f=(d.rowHeight+g)*Math.min(d.visibleRows,a)+3}else u&&(f=b("#"+e).height());return f},ca=function(){var a=m("postChildID");b("#"+a).on("click",function(a){return!0===n?!1:(a.preventDefault(),a.stopPropagation(),void(u&&V()))}),b("#"+a+" li."+t).on("click",function(a){"input"!==a.target.nodeName.toLowerCase()&&E(this)}),b("#"+a+" li."+t).on("mousedown",function(c){if(!0===n)return!1;if(M=b("#"+a+" li."+k),L=this,c.preventDefault(),c.stopPropagation(),!0===d.enableCheckbox&&"input"===c.target.nodeName.toLowerCase()&&(A=!0),!0===u)if(x)if(!0===C){b(this).addClass(k);var e=b("#"+a+" li."+k),f=z(this);if(1<e.length){c=b("#"+a+" li."+l);var g=z(e[0]),e=z(e[1]);for(f>e&&(g=f,e+=1),f=Math.min(g,e);f<=Math.max(g,e);f++){var h=c[f];b(h).hasClass(t)&&b(h).addClass(k)}}}else!0===A?(b(this).toggleClass(k),!0===d.enableCheckbox&&(c=this.childNodes[0],c.checked=!c.checked)):(b("#"+a+" li."+k).removeClass(k),b("#"+a+" input:checkbox").prop("checked",!1),b(this).addClass(k),!0===d.enableCheckbox&&(this.childNodes[0].checked=!0));else b("#"+a+" li."+k).removeClass(k),b(this).addClass(k);else b("#"+a+" li."+k).removeClass(k),b(this).addClass(k)}),b("#"+a+" li."+t).on("mouseenter",function(a){return!0===n?!1:(a.preventDefault(),a.stopPropagation(),void(null!=L&&x&&(b(this).addClass(k),!0===d.enableCheckbox&&(this.childNodes[0].checked=!0))))}),b("#"+a+" li."+t).on("mouseover",function(a){return!0===n?!1:void b(this).addClass("hover")}),b("#"+a+" li."+t).on("mouseout",function(c){return!0===n?!1:void b("#"+a+" li.hover").removeClass("hover")}),b("#"+a+" li."+t).on("mouseup",function(c){return!0===n?!1:(c.preventDefault(),c.stopPropagation(),!0===d.enableCheckbox&&(A=!1),c=b("#"+a+" li."+k).length,I=M.length!=c||0==c?!0:!1,O(),P(),V(),void(L=null))}),0==d.disabledOptionEvents&&(b("#"+a+" li."+l).on("click",function(a){return!0===n?!1:void F(this,"click")}),b("#"+a+" li."+l).on("mouseenter",function(a){return!0===n?!1:void F(this,"mouseenter")}),b("#"+a+" li."+l).on("mouseover",function(a){return!0===n?!1:void F(this,"mouseover")}),b("#"+a+" li."+l).on("mouseout",function(a){return!0===n?!1:void F(this,"mouseout")}),b("#"+a+" li."+l).on("mousedown",function(a){return!0===n?!1:void F(this,"mousedown")}),b("#"+a+" li."+l).on("mouseup",function(a){return!0===n?!1:void F(this,"mouseup")}))},da=function(a,c,d){b("#"+a).off(c,d),b("#"+a).trigger(c),b("#"+a).on(c,d)},xa=function(){var a=m("postID"),c=m("postTitleTextID");m("postChildID"),b("#"+a).on(d.event,function(a){return!0===n?!1:(v(d.event),a.preventDefault(),a.stopPropagation(),void W(a))}),b("#"+a).on("keydown",function(a){var b=a.which;!K&&(13==b||38==b||40==b||37==b||39==b||b>=47&&!u)&&(W(a),b>=47?ea():(a.preventDefault(),a.stopImmediatePropagation()))}),b("#"+a).on("focus",fa),b("#"+a).on("blur",ga),b("#"+c).on("blur",function(b){da(a,"focus",fa)}),ca(),b("#"+a).on("dblclick",ra),b("#"+a).on("mousemove",sa),b("#"+a).on("mouseenter",ta),b("#"+a).on("mouseleave",ua),b("#"+a).on("mousedown",va),b("#"+a).on("mouseup",wa)},fa=function(a){v("focus")},ga=function(a){v("blur")},X=function(){var a=m("postID"),c=m("postChildID");!0===u&&!1===d.enableCheckbox?(b("#"+a+" .ddTitle").hide(),b("#"+c).css({display:"block",position:"relative"})):(!1===d.enableCheckbox&&(x=!1),b("#"+a+" .ddTitle").show(),b("#"+c).css({display:"none",position:"absolute"}),a=b("#"+c+" li."+k)[0],b("#"+c+" li."+k).removeClass(k),c=z(b(a).addClass(k)),y(c)),w(w())},ha=function(){var a=m("postID");!0===n?b("#"+a).addClass("disabledAll"):b("#"+a).removeClass("disabledAll")},za=function(){var a;a={className:H+" ddcommon"+("true"==d.roundedCorner?" borderRadius":"")};var c=ba(h(e)),f=b("#"+e).outerWidth();a.style="width: "+f+"px;",0<c.length&&(a.style=a.style+""+c),a.id=m("postID"),a.tabIndex=h(e).tabIndex,a=s("div",a);var g;g=0<=h(e).selectedIndex?h(e).options[h(e).selectedIndex]:{value:"",text:""};var i=c="";(f=b("#"+e).data("usesprite"))&&(d.useSprite=f),0!=d.useSprite&&(c=" "+d.useSprite,i=" "+g.className);var c=s("div",{className:"ddTitle"+c+("true"==d.roundedCorner?" borderRadiusTp":"")}),f=s("span",{className:"divider"}),j=s("span",{className:"ddArrow arrowoff"}),k=m("postTitleID"),i=s("span",{className:"ddTitleText"+i,id:k});g=D(g);var k=g.image,l=g.text||"";if(""!=k&&d.showIcon){var n=s("img");n.src=k,""!=g.imagecss&&(n.className=g.imagecss+" ")}for(k=s("span",{className:"ddlabel"},l),c.appendChild(f),c.appendChild(j),n&&i.appendChild(n),i.appendChild(k),c.appendChild(i),n=s("span",{className:"description"},g.description),i.appendChild(n),a.appendChild(c),n=m("postTitleTextID"),n=s("input",{id:n,type:"text",value:"",autocomplete:"none",className:"text shadow "+("true"==d.roundedCorner?"borderRadius":""),style:"display: none"}),a.appendChild(n),n={className:"ddChild ddchild_ border shadow",id:m("postChildID")},n.style=0==u?"z-index: "+d.zIndex:"z-index:1",(c=b("#"+e).data("childwidth")||d.childWidth)&&(n.style=(n.style||"")+";width:"+c),n=s("div",n),c=s("ul"),0!=d.useSprite&&(c.className=d.useSprite),f=h(e).children,j=0;j<f.length;j++){if(g=f[j],"optgroup"==g.nodeName.toLowerCase()){for(i=s("li",{className:"optgroup"}),k=s("span",{className:"optgroupTitle"},g.label),i.appendChild(k),g=g.children,k=s("ul"),l=0;l<g.length;l++){var o=U(g[l]);k.appendChild(o)}i.appendChild(k)}else i=U(g);c.appendChild(i)}n.appendChild(c),a.appendChild(n),b("#"+e).after(a),a=m("postElementHolder"),0==b("#"+a).length?(n={style:"height: 0px;overflow: hidden;position: absolute;",className:"ddOutOfVision"},n.id=a,n=s("div",n),b("#"+e).after(n),b("#"+e).appendTo(b("#"+a))):b("#"+a).css({height:0,overflow:"hidden",position:"absolute"}),h(e).tabIndex=-1,a=m("postTitleTextID"),"true"==d.enableAutoFilter&&b("#"+a).on("keyup",ya),X(),ha(),xa(),a=m("postChildID"),""!=d.append&&b("#"+a).append(d.append),""!=d.prepend&&b("#"+a).prepend(d.prepend),"function"==typeof d.on.create&&d.on.create.apply(q,arguments)},ia=function(a){function c(a){b(b("#"+e+" li."+l)[a]).addClass(k),!0===d.enableCheckbox&&b(b("#"+e+" li."+l)[a]).find("input.checkbox").prop("checked","checked")}var e=m("postChildID");if(b("#"+e+" li."+l).removeClass(k),!0===d.enableCheckbox&&b("#"+e+" li."+l+" input.checkbox").prop("checked",!1),!0===aa(a))for(var f=0;f<a.length;f++)c(a[f]);else c(a)},ja=function(a,c){for(var d=m("postChildID"),d=a||b("#"+d+" li."+k),f=0;f<d.length;f++){var g=!0===c?d[f]:z(d[f]);h(e).options[g].selected="selected"}y(d)},O=function(){var a=m("postChildID"),c=b("#"+a+" li."+k);(x&&(C||A)||I)&&(h(e).selectedIndex=-1);var f;0==c.length?f=-1:1<c.length?ja(c):f=z(b("#"+a+" li."+k)),(h(e).selectedIndex!=f||I)&&1>=c.length&&(I=!1,Q("change"),h(e).selectedIndex=f,y(f),"function"==typeof d.on.change&&(a=B(),d.on.change(a.data,a.ui)),b("#"+e).trigger("change"))},y=function(a,c){if(void 0!==a){var d,f,g;-1==a?(d=-1,g=f="",G(-1)):"object"!=typeof a?(f=h(e).options[a],d=h(e).selectedIndex=a,f=D(f),g=a>=0?h(e).options[a].text:"",G(void 0,f),f=f.value):(d=c&&c.index||h(e).selectedIndex,f=c&&c.value||h(e).value,g=c&&c.text||h(e).options[h(e).selectedIndex].text||"",G(d)),q.selectedIndex=d,q.value=f,q.selectedText=g,d=h(e).children,q.children=d,d=B(),q.uiData=d,d=b("#"+e+" option:selected"),q.selectedOptions=d}},Q=function(a){var c={byElement:!1,byJQuery:!1,hasEvent:!1},d=b("#"+e);try{null!==d.prop("on"+a)&&(c.hasEvent=!0,c.byElement=!0)}catch(f){}return(d="function"==typeof b._data?b._data(d[0],"events"):d.data("events"))&&d[a]&&(c.hasEvent=!0,c.byJQuery=!0),c},V=function(){P(),b("body").on("click",E),b(document).on("keydown",ka),b(document).on("keyup",la)},P=function(){b("body").off("click",E),b(document).off("keydown",ka),b(document).off("keyup",la)},ya=function(a){if(47>a.keyCode&&8!=a.keyCode&&46!=a.keyCode)return!1;a=m("postChildID");var c=m("postTitleTextID"),c=h(c).value;0==c.length?(b("#"+a+" li:hidden").show(),w(w())):(b("#"+a+" li").hide(),c=b("#"+a+" li:Contains('"+c+"')").show(),b("#"+a+" li:visible").length<=d.visibleRows&&w(-1),(0<c.length&&!u||!x)&&(b("#"+a+" ."+k).removeClass(k),b(c[0]).addClass(k))),u||R()},ea=function(){if("true"==d.enableAutoFilter){var a=m("postID"),c=m("postTitleTextID");0<b("#"+c+":hidden").length&&0==A&&(b("#"+c+":hidden").show().val(""),da(a,"blur",ga),h(c).focus())}},ka=function(a){m("postTitleTextID");var c=m("postChildID");switch(a.keyCode){case 40:case 39:a.preventDefault(),a.stopPropagation(),Aa();break;case 38:case 37:a.preventDefault(),a.stopPropagation(),Ba();break;case 27:case 13:a.preventDefault(),a.stopPropagation(),E(),a=b("#"+c+" li."+k).length,I=M.length!=a||0==a?!0:!1,O(),P(),L=null;break;case 16:C=!0;break;case 17:A=!0;break;default:47<=a.keyCode&&!1===u&&ea()}return!0===n?!1:void v("keydown")},la=function(a){switch(a.keyCode){case 16:C=!1;break;case 17:A=!1}return!0===n?!1:void v("keyup")},ra=function(a){return!0===n?!1:void v("dblclick")},sa=function(a){return!0===n?!1:void v("mousemove")},ta=function(a){return!0===n?!1:(a.preventDefault(),void v("mouseover"))},ua=function(a){return!0===n?!1:(a.preventDefault(),void v("mouseout"))},va=function(a){return!0===n?!1:void v("mousedown")},wa=function(a){return!0===n?!1:void v("mouseup")},Y=function(a,c){var d={byElement:!1,byJQuery:!1,hasEvent:!1};void 0!=b(a).prop("on"+c)&&(d.hasEvent=!0,d.byElement=!0);var e=b(a).data("events");return e&&e[c]&&(d.hasEvent=!0,d.byJQuery=!0),d},F=function(a,c){if(0==d.disabledOptionEvents){var f=h(e).options[z(a)];if(!0===Y(f,c).hasEvent){if(!0===Y(f,c).byElement&&f["on"+c](),!0===Y(f,c).byJQuery)switch(c){case"keydown":case"keyup":break;default:b(f).trigger(c)}return!1}}},v=function(a){if("function"==typeof d.on[a]&&d.on[a].apply(this,arguments),!0===Q(a).hasEvent){if(!0===Q(a).byElement)h(e)["on"+a]();else if(!0===Q(a).byJQuery)switch(a){case"keydown":case"keyup":break;default:b("#"+e).triggerHandler(a)}return!1}},Z=function(a){var c=m("postChildID");if(a=void 0!==a?a:b("#"+c+" li."+k),0<a.length){a=parseInt(b(a).position().top);var d=parseInt(b("#"+c).height());a>d&&(a=a+b("#"+c).scrollTop()-d/2,b("#"+c).animate({scrollTop:a},500))}},Aa=function(){function a(c){return c+=1,c>d.length||!0===b(d[c]).hasClass(t)?c:a(c)}var c=m("postChildID"),d=b("#"+c+" li:visible."+l),e=b("#"+c+" li:visible."+k),e=0==e.length?d[0]:e,e=b("#"+c+" li:visible."+l).index(e);e<d.length-1&&(e=a(e),e<d.length&&(C&&u&&x||b("#"+c+" ."+k).removeClass(k),b(d[e]).addClass(k),G(e),1==u&&O(),Z(b(d[e]))),u||R())},Ba=function(){function a(c){return c-=1,0>c||!0===b(e[c]).hasClass(t)?c:a(c)}var c=m("postChildID"),d=b("#"+c+" li:visible."+k),e=b("#"+c+" li:visible."+l),d=b("#"+c+" li:visible."+l).index(d[0]);d>=0&&(d=a(d),d>=0&&(C&&u&&x||b("#"+c+" ."+k).removeClass(k),b(e[d]).addClass(k),G(d),1==u&&O(),0>=parseInt(b(e[d]).position().top+b(e[d]).height())&&(d=b("#"+c).scrollTop()-b("#"+c).height()-b(e[d]).height(),b("#"+c).animate({scrollTop:d},500))),u||R())},R=function(){var a=m("postID"),c=m("postChildID"),e=b("#"+a).offset(),f=b("#"+a).height(),g=b(window).height(),h=b(window).scrollTop(),i=b("#"+c).height(),j=b("#"+a).height(),k=d.openDirection.toLowerCase();(g+h<Math.floor(i+f+e.top)||"alwaysup"==k)&&"alwaysdown"!=k?(j=i,b("#"+c).css({top:"-"+j+"px",display:"block",zIndex:d.zIndex}),"true"==d.roundedCorner&&b("#"+a).removeClass("borderRadius borderRadiusTp").addClass("borderRadiusBtm"),j=b("#"+c).offset().top,-10>j&&(b("#"+c).css({top:parseInt(b("#"+c).css("top"))-j+20+h+"px",zIndex:d.zIndex}),"true"==d.roundedCorner&&b("#"+a).removeClass("borderRadiusBtm borderRadiusTp").addClass("borderRadius"))):(b("#"+c).css({top:j+"px",zIndex:d.zIndex}),"true"==d.roundedCorner&&b("#"+a).removeClass("borderRadius borderRadiusBtm").addClass("borderRadiusTp")),pa&&(c=N.indexOf("MSIE"),c=c>0?parseInt(N.substring(c+5,N.indexOf(".",c))):0,7>=c&&(b("div.ddcommon").css("zIndex",d.zIndex-10),b("#"+a).css("zIndex",d.zIndex+5)))},W=function(a){if(!0===n)return!1;if(m("postID"),a=m("postChildID"),K)"mouseover"!==d.event&&E();else{K=!0,""!=msBeautify.oldDiv&&b("#"+msBeautify.oldDiv).css({display:"none"}),msBeautify.oldDiv=a,b("#"+a+" li:hidden").show(),R();var c=d.animStyle;""==c||"none"==c?(b("#"+a).css({display:"block"}),Z(),"function"==typeof d.on.open&&(a=B(),d.on.open(a.data,a.ui))):b("#"+a)[c]("fast",function(){if(Z(),"function"==typeof d.on.open){var a=B();d.on.open(a.data,a.ui)}}),V()}},E=function(a){K=!1;var c=m("postID");a=m("postChildID"),(!1===u||!0===d.enableCheckbox)&&(b("#"+a).css({display:"none"}),"true"==d.roundedCorner&&b("#"+c).removeClass("borderRadiusTp borderRadiusBtm").addClass("borderRadius")),P(),"function"==typeof d.on.close&&(c=B(),d.on.close(c.data,c.ui)),c=m("postTitleTextID"),0<b("#"+c+":visible").length&&(b("#"+c+":visible").hide(),h(c).blur()),w(w()),b("#"+a).css({zIndex:1}),G(h(e).selectedIndex)},Ca=function(){try{J=b.extend(!0,{},h(e));for(var a in J)"function"!=typeof J[a]&&(q[a]=J[a])}catch(c){}q.selectedText=0<=h(e).selectedIndex?h(e).options[h(e).selectedIndex].text:"",q.version=msBeautify.version.msDropdown,q.author=msBeautify.author},ma=function(a){if(null!=a&&"undefined"!=typeof a){var c=m("postChildID"),d=D(a),c=b("#"+c+" li."+l+":eq("+a.index+")");return{data:d,ui:c,option:a,index:a.index}}return null},B=function(){var a,c,d=m("postChildID"),f=h(e);if(-1==f.selectedIndex)c=d=a=null,f=-1;else if(d=b("#"+d+" li."+k),1<d.length){var g=[];for(c=[],a=0;a<d.length;a++){var i=z(d[a]);
g.push(i),c.push(f.options[i])}f=a=g}else c=f.options[f.selectedIndex],a=D(c),f=f.selectedIndex;return{data:a,ui:d,index:f,option:c}},G=function(a,c){var f=m("postTitleID"),g={};-1==a?(g.text="&nbsp;",g.className="",g.description="",g.image=""):"undefined"!=typeof a?(g=h(e).options[a],g=D(g)):g=c,b("#"+f).find(".ddlabel").html(g.text),h(f).className="ddTitleText "+g.className,""!=g.description?b("#"+f).find(".description").html(g.description).show():b("#"+f).find(".description").html("").hide();var i=b("#"+f).find("img");0<i.length&&b(i).remove(),""!=g.image&&d.showIcon&&(i=s("img",{src:g.image}),b("#"+f).prepend(i),""!=g.imagecss&&(i.className=g.imagecss+" "),""==g.description&&(i.className+="fnone"))},na=function(a,b){q[a]=b},oa=function(a,c,f){var g=m("postChildID"),i=!1;switch(a){case"add":var j=U(c||h(e).options[f]),i=3==arguments.length?f:b("#"+g+" li."+l).length-1;0>i||!i?b("#"+g+" ul").append(j):(g=b("#"+g+" li."+l)[i],b(g).before(j)),g=m("postChildID"),b("#"+g).off("click"),b("#"+g+" li."+t).off("mouseenter"),b("#"+g+" li."+t).off("click"),b("#"+g+" li."+t).off("mouseover"),b("#"+g+" li."+t).off("mouseout"),b("#"+g+" li."+t).off("mousedown"),b("#"+g+" li."+t).off("mouseup"),ca(),null!=d.on.add&&d.on.add.apply(this,arguments);break;case"remove":i=b(b("#"+g+" li."+l)[f]).hasClass(k),b("#"+g+" li."+l+":eq("+f+")").remove(),j=b("#"+g+" li."+t),1==i&&0<j.length&&(b(j[0]).addClass(k),i=b("#"+g+" li."+l).index(j[0]),y(i)),0==j.length&&y(-1),b("#"+g+" li."+l).length<d.visibleRows&&!u&&w(-1),null!=d.on.remove&&d.on.remove.apply(this,arguments)}};this.act=function(){var a=arguments[0];switch(Array.prototype.shift.call(arguments),a){case"add":q.add.apply(this,arguments);break;case"remove":q.remove.apply(this,arguments);break;default:try{h(e)[a].apply(h(e),arguments)}catch(b){}}},this.add=function(){var a,c,d,f,g;g=arguments[0],"string"==typeof g?(a=g,opt=new Option(a,a)):(a=g.text||"",c=g.value||a,d=g.title||"",f=g.image||"",g=g.description||"",opt=new Option(a,c),b(opt).data("description",g),b(opt).data("image",f),b(opt).data("title",d)),arguments[0]=opt,h(e).add.apply(h(e),arguments),a=h(e).children,q.children=a,a=h(e).length,q.length=a,oa("add",opt,arguments[1])},this.remove=function(a){h(e).remove(a);var b=h(e).children;q.children=b,b=h(e).length,q.length=b,oa("remove",void 0,a)},this.set=function(a,c){if("undefined"==typeof a||"undefined"==typeof c)return!1;a=a.toString();try{q[a]=c}catch(d){}switch(a){case"size":h(e)[a]=c,0==c&&(h(e).multiple=!1),u=1<h(e).size||1==h(e).multiple?!0:!1,X();break;case"multiple":h(e)[a]=c,u=1<h(e).size||1==h(e).multiple?!0:!1,x=h(e).multiple,X(),q[a]=c;break;case"disabled":n=h(e)[a]=c,ha();break;case"selectedIndex":case"value":"selectedIndex"==a&&!0===aa(c)?(b("#"+e+" option").prop("selected",!1),ja(c,!0),ia(c)):(h(e)[a]=c,ia(h(e).selectedIndex),y(h(e).selectedIndex));break;case"length":var f=m("postChildID");c<h(e).length&&(h(e)[a]=c,0==c?(b("#"+f+" li."+l).remove(),y(-1)):(b("#"+f+" li."+l+":gt("+(c-1)+")").remove(),0==b("#"+f+" li."+k).length&&b("#"+f+" li."+t+":eq(0)").addClass(k)),q[a]=c,f=h(e).children,q.children=f);break;case"id":break;default:try{h(e)[a]=c,q[a]=c}catch(g){}}},this.get=function(a){return q[a]||h(e)[a]},this.visible=function(a){var c=m("postID");if(!0===a)b("#"+c).show();else{if(!1!==a)return"none"==b("#"+c).css("display")?!1:!0;b("#"+c).hide()}},this.debug=function(a){msBeautify.debug(a)},this.close=function(){E()},this.open=function(){W()},this.visibleRows=this.showRows=function(a){return"undefined"==typeof a||0==a?!1:(d.visibleRows=a,void w(w()))},this.on=function(a,c){b("#"+e).on(a,c)},this.off=function(a,c){b("#"+e).off(a,c)},this.addMyEvent=this.on,this.getData=function(){return B()},this.namedItem=function(){var a=h(e).namedItem.apply(h(e),arguments);return ma(a)},this.item=function(){var a=h(e).item.apply(h(e),arguments);return ma(a)},this.setIndexByValue=function(a){this.set("value",a)},this.destroy=function(){m("postElementHolder");var a=m("postID");b("#"+a+", #"+a+" *").off(),h(e).tabIndex=h(a).tabIndex,b("#"+a).remove(),b("#"+e).parent().replaceWith(b("#"+e)),b("#"+e).data("dd",null)},this.refresh=function(){y(h(e).selectedIndex)},function(){qa(),e.id||(e.id="msdrpdd"+msBeautify.counter++),e=e.id,q.element=e,d.mainCSS=b("#"+e).data("maincss")||d.mainCSS,d.visibleRows=b("#"+e).data("visiblerows")||d.visibleRows,0==b("#"+e).data("showicon")&&(d.showIcon=b("#"+e).data("showicon")),d.useSprite=b("#"+e).data("usesprite")||d.useSprite,d.animStyle=b("#"+e).data("animstyle")||d.animStyle,d.event=b("#"+e).data("event")||d.event,d.openDirection=b("#"+e).data("opendirection")||d.openDirection,d.jsonTitle=b("#"+e).data("jsontitle")||d.jsonTitle,d.disabledOpacity=b("#"+e).data("disabledopacity")||d.disabledOpacity,d.childWidth=b("#"+e).data("childwidth")||d.childWidth,d.enableCheckbox=b("#"+e).data("enablecheckbox")||d.enableCheckbox,d.checkboxNameSuffix=b("#"+e).data("checkboxnamesuffix")||d.checkboxNameSuffix,d.append=b("#"+e).data("append")||d.append,d.prepend=b("#"+e).data("prepend")||d.prepend,d.reverseMode=b("#"+e).data("reversemode")||d.reverseMode,d.roundedCorner=b("#"+e).data("roundedcorner")||d.roundedCorner,d.enableAutoFilter=b("#"+e).data("enableautofilter")||d.enableAutoFilter,d.reverseMode=d.reverseMode.toString(),d.roundedCorner=d.roundedCorner.toString(),d.enableAutoFilter=d.enableAutoFilter.toString(),n=h(e).disabled,"true"===d.enableCheckbox.toString()&&(h(e).multiple=!0,d.enableCheckbox=!0),(u=1<h(e).size||1==h(e).multiple?!0:!1)&&(x=h(e).multiple),Ca(),za(),na("uiData",B()),na("selectedOptions",b("#"+e+" option:selected"));var a=m("postChildID");M=b("#"+a+" li."+k),"true"===d.reverseMode&&b("#"+e).on("change",function(){y(this.selectedIndex)}),h(e).refresh=function(a){b("#"+e).msDropdown().data("dd").refresh()}}()}msBeautify={version:{msDropdown:"3.5.2"},author:"Marghoob Suleman",counter:20,debug:function(a){!1!==a?b(".ddOutOfVision").css({height:"auto",position:"relative"}):b(".ddOutOfVision").css({height:"0px",position:"absolute"})},oldDiv:"",create:function(a,c,d){var e;switch((d||"dropdown").toLowerCase()){case"dropdown":case"select":e=b(a).msDropdown(c).data("dd")}return e}},b.msDropDown={},b.msDropdown={},b.extend(!0,b.msDropDown,msBeautify),b.extend(!0,b.msDropdown,msBeautify),void 0===b.fn.prop&&(b.fn.prop=b.fn.attr),void 0===b.fn.on&&(b.fn.on=b.fn.bind,b.fn.off=b.fn.unbind),b.expr[":"].Contains="function"==typeof b.expr.createPseudo?b.expr.createPseudo(function(a){return function(c){return 0<=b(c).text().toUpperCase().indexOf(a.toUpperCase())}}):function(a,c,d){return 0<=b(a).text().toUpperCase().indexOf(d[3].toUpperCase())},b.fn.extend({msDropDown:function(a){return this.each(function(){if(!b(this).data("dd")){var c=new S(this,a);b(this).data("dd",c)}})}}),b.fn.msDropdown=b.fn.msDropDown}(jQuery),function(){function a(a){function b(b,d){var f,o,p=b==window,q=d&&void 0!==d.message?d.message:void 0;if(d=a.extend({},a.blockUI.defaults,d||{}),!d.ignoreIfBlocked||!a(b).data("blockUI.isBlocked")){if(d.overlayCSS=a.extend({},a.blockUI.defaults.overlayCSS,d.overlayCSS||{}),f=a.extend({},a.blockUI.defaults.css,d.css||{}),d.onOverlayClick&&(d.overlayCSS.cursor="pointer"),o=a.extend({},a.blockUI.defaults.themedCSS,d.themedCSS||{}),q=void 0===q?d.message:q,p&&m&&c(window,{fadeOut:0}),q&&"string"!=typeof q&&(q.parentNode||q.jquery)){var r=q.jquery?q[0]:q,s={};a(b).data("blockUI.history",s),s.el=r,s.parent=r.parentNode,s.display=r.style.display,s.position=r.style.position,s.parent&&s.parent.removeChild(r)}a(b).data("blockUI.onUnblock",d.onUnblock);var t,s=d.baseZ;t=a(j||d.forceIframe?'<iframe class="blockUI" style="z-index:'+s++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+d.iframeSrc+'"></iframe>':'<div class="blockUI" style="display:none"></div>'),r=a(d.theme?'<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+s++ +';display:none"></div>':'<div class="blockUI blockOverlay" style="z-index:'+s++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),d.theme&&p?(s='<div class="blockUI '+d.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(s+10)+';display:none;position:fixed">',d.title&&(s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(d.title||"&nbsp;")+"</div>"),s+='<div class="ui-widget-content ui-dialog-content"></div></div>'):d.theme?(s='<div class="blockUI '+d.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(s+10)+';display:none;position:absolute">',d.title&&(s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(d.title||"&nbsp;")+"</div>"),s+='<div class="ui-widget-content ui-dialog-content"></div>',s+="</div>"):s=p?'<div class="blockUI '+d.blockMsgClass+' blockPage" style="z-index:'+(s+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+d.blockMsgClass+' blockElement" style="z-index:'+(s+10)+';display:none;position:absolute"></div>',s=a(s),q&&(d.theme?(s.css(o),s.addClass("ui-widget-content")):s.css(f)),d.theme||r.css(d.overlayCSS),r.css("position",p?"fixed":"absolute"),(j||d.forceIframe)&&t.css("opacity",0),f=[t,r,s];var u=a(p?"body":b);if(a.each(f,function(){this.appendTo(u)}),d.theme&&d.draggable&&a.fn.draggable&&s.draggable({handle:".ui-dialog-titlebar",cancel:"li"}),o=l&&(!a.support.boxModel||0<a("object,embed",p?null:b).length),k||o){if(p&&d.allowBodyStretch&&a.support.boxModel&&a("html,body").css("height","100%"),(k||!a.support.boxModel)&&!p){o=parseInt(a.css(b,"borderTopWidth"),10)||0;var v=parseInt(a.css(b,"borderLeftWidth"),10)||0,w=o?"(0 - "+o+")":0,x=v?"(0 - "+v+")":0}a.each(f,function(a,b){var c=b[0].style;if(c.position="absolute",2>a)p?c.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+d.quirksmodeOffsetHack+') + "px"'):c.setExpression("height",'this.parentNode.offsetHeight + "px"'),p?c.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):c.setExpression("width",'this.parentNode.offsetWidth + "px"'),x&&c.setExpression("left",x),w&&c.setExpression("top",w);else if(d.centerY)p&&c.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),c.marginTop=0;else if(!d.centerY&&p){var e="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+(d.css&&d.css.top?parseInt(d.css.top,10):0)+') + "px"';c.setExpression("top",e)}})}q&&(d.theme?s.find(".ui-widget-content").append(q):s.append(q),(q.jquery||q.nodeType)&&a(q).show()),(j||d.forceIframe)&&d.showOverlay&&t.show(),d.fadeIn?(f=d.onBlock?d.onBlock:i,t=d.showOverlay&&!q?f:i,f=q?f:i,d.showOverlay&&r._fadeIn(d.fadeIn,t),q&&s._fadeIn(d.fadeIn,f)):(d.showOverlay&&r.show(),q&&s.show(),d.onBlock&&d.onBlock()),e(1,b,d),p?(m=s[0],n=a(d.focusableElements,m),d.focusInput&&setTimeout(g,20)):h(s[0],d.centerX,d.centerY),d.timeout&&(q=setTimeout(function(){p?a.unblockUI(d):a(b).unblock(d)},d.timeout),a(b).data("blockUI.timeout",q))}}function c(b,c){var f,g=b==window,h=a(b),i=h.data("blockUI.history"),j=h.data("blockUI.timeout");j&&(clearTimeout(j),h.removeData("blockUI.timeout")),c=a.extend({},a.blockUI.defaults,c||{}),e(0,b,c),null===c.onUnblock&&(c.onUnblock=h.data("blockUI.onUnblock"),h.removeData("blockUI.onUnblock"));var k;k=g?a("body").children().filter(".blockUI").add("body > .blockUI"):h.find(">.blockUI"),c.cursorReset&&(1<k.length&&(k[1].style.cursor=c.cursorReset),2<k.length&&(k[2].style.cursor=c.cursorReset)),g&&(m=n=null),c.fadeOut?(f=k.length,k.stop().fadeOut(c.fadeOut,function(){0===--f&&d(k,i,c,b)})):d(k,i,c,b)}function d(b,c,d,e){var f=a(e);f.data("blockUI.isBlocked")||(b.each(function(a,b){this.parentNode&&this.parentNode.removeChild(this)}),c&&c.el&&(c.el.style.display=c.display,c.el.style.position=c.position,c.parent&&c.parent.appendChild(c.el),f.removeData("blockUI.history")),f.data("blockUI.static")&&f.css("position","static"),"function"==typeof d.onUnblock&&d.onUnblock(e,d),b=a(document.body),c=b.width(),d=b[0].style.width,b.width(c-1).width(c),b[0].style.width=d)}function e(b,c,d){var e=c==window;c=a(c),(b||(!e||m)&&(e||c.data("blockUI.isBlocked")))&&(c.data("blockUI.isBlocked",b),e&&d.bindEvents&&(!b||d.showOverlay)&&(b?a(document).bind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",d,f):a(document).unbind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",f)))}function f(b){if("keydown"===b.type&&b.keyCode&&9==b.keyCode&&m&&b.data.constrainTabKey){var c=n,d=b.shiftKey&&b.target===c[0];if(!b.shiftKey&&b.target===c[c.length-1]||d)return setTimeout(function(){g(d)},10),!1}var c=b.data,e=a(b.target);return e.hasClass("blockOverlay")&&c.onOverlayClick&&c.onOverlayClick(b),0<e.parents("div."+c.blockMsgClass).length?!0:0===e.parents().children().filter("div.blockUI").length}function g(a){n&&(a=n[!0===a?n.length-1:0])&&a.focus()}function h(b,c,d){var e=b.parentNode,f=b.style,g=(e.offsetWidth-b.offsetWidth)/2-(parseInt(a.css(e,"borderLeftWidth"),10)||0);b=(e.offsetHeight-b.offsetHeight)/2-(parseInt(a.css(e,"borderTopWidth"),10)||0),c&&(f.left=g>0?g+"px":"0"),d&&(f.top=b>0?b+"px":"0")}a.fn._fadeIn=a.fn.fadeIn;var i=a.noop||function(){},j=/MSIE/.test(navigator.userAgent),k=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),l=a.isFunction(document.createElement("div").style.setExpression);a.blockUI=function(a){b(window,a)},a.unblockUI=function(a){c(window,a)},a.growlUI=function(b,c,d,e){var f=a('<div class="growlUI"></div>');b&&f.append("<h1>"+b+"</h1>"),c&&f.append("<h2>"+c+"</h2>"),void 0===d&&(d=3e3);var g=function(b){b=b||{},a.blockUI({message:f,fadeIn:"undefined"!=typeof b.fadeIn?b.fadeIn:700,fadeOut:"undefined"!=typeof b.fadeOut?b.fadeOut:1e3,timeout:"undefined"!=typeof b.timeout?b.timeout:d,centerY:!1,showOverlay:!1,onUnblock:e,css:a.blockUI.defaults.growlCSS})};g(),f.css("opacity"),f.mouseover(function(){g({fadeIn:0,timeout:3e4});var b=a(".blockMsg");b.stop(),b.fadeTo(300,1)}).mouseout(function(){a(".blockMsg").fadeOut(1e3)})},a.fn.block=function(c){if(this[0]===window)return a.blockUI(c),this;var d=a.extend({},a.blockUI.defaults,c||{});return this.each(function(){var b=a(this);d.ignoreIfBlocked&&b.data("blockUI.isBlocked")||b.unblock({fadeOut:0})}),this.each(function(){"static"==a.css(this,"position")&&(this.style.position="relative",a(this).data("blockUI.static",!0)),this.style.zoom=1,b(this,c)})},a.fn.unblock=function(b){return this[0]===window?(a.unblockUI(b),this):this.each(function(){c(this,b)})},a.blockUI.version=2.66,a.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var m=null,n=[]}"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):a(jQuery)}(),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";function b(c,d){var e=function(){},f=this,g={autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:b.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:e,onSearchComplete:e,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,lookupFilter:function(a,b,c){return-1!==a.value.toLowerCase().indexOf(c)},paramName:"query",transformResult:function(b){return"string"==typeof b?a.parseJSON(b):b},autoSelectBlur:!1};f.element=c,f.el=a(c),f.suggestions=[],f.badQueries=[],f.selectedIndex=-1,f.currentValue=f.element.value,f.intervalId=0,f.cachedResponse=[],f.onChangeInterval=null,f.onChange=null,f.isLocal=!1,f.suggestionsContainer=null,f.options=a.extend({},g,d),f.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},f.hint=null,f.hintValue="",f.selection=null,f.initialize(),f.setOptions(d)}var c=function(){return{escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild}}}(),d={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};b.utils=c,a.Autocomplete=b,b.formatResult=function(a,b){var d="("+c.escapeRegExChars(b)+")";return a.value.replace(new RegExp(d,"gi"),"<strong>$1</strong>")},b.prototype={killerFn:null,initialize:function(){var c,d=this,e="."+d.classes.suggestion,f=d.classes.selected,g=d.options;d.element.setAttribute("autocomplete","none"),d.killerFn=function(b){0===a(b.target).closest("."+d.options.containerClass).length&&(d.killSuggestions(),d.disableKillerFn())},d.suggestionsContainer=b.utils.createNode('<div class="'+g.containerClass+'" style="position: absolute; display: none;"></div>'),c=a(d.suggestionsContainer),c.appendTo(g.appendTo),"auto"!==g.width&&c.width(g.width),c.on("mouseover.autocomplete",e,function(){d.activate(a(this).data("index"))}),c.on("mouseout.autocomplete",function(){g.autoSelectBlur||(d.selectedIndex=-1,c.children("."+f).removeClass(f))}),c.on("click.autocomplete",e,function(){d.select(a(this).data("index"))}),d.fixPosition(),d.fixPositionCapture=function(){d.visible&&d.fixPosition()},a(window).on("resize",d.fixPositionCapture),d.el.on("keydown.autocomplete",function(a){d.onKeyPress(a)}),d.el.on("keyup.autocomplete",function(a){d.onKeyUp(a)}),d.el.on("blur.autocomplete",function(){d.onBlur()}),d.el.on("focus.autocomplete",function(){d.fixPosition()}),d.el.on("change.autocomplete",function(a){d.onKeyUp(a)})},onBlur:function(){this.options.autoSelectBlur&&-1!==this.selectedIndex&&this.select(this.selectedIndex),this.enableKillerFn()},setOptions:function(b){var c=this,d=c.options;a.extend(d,b),c.isLocal=a.isArray(d.lookup),c.isLocal&&(d.lookup=c.verifySuggestionsFormat(d.lookup)),a(c.suggestionsContainer).css({"max-height":d.maxHeight+"px",width:d.width+"px","z-index":d.zIndex})},clearCache:function(){this.cachedResponse=[],this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},fixPosition:function(){var b,c=this;"body"===c.options.appendTo&&(b=c.el.offset(),a(c.suggestionsContainer).css({top:b.top+c.el.outerHeight()+"px",left:b.left+"px"}))},enableKillerFn:function(){var b=this;a(document).on("click.autocomplete",b.killerFn)},disableKillerFn:function(){var b=this;a(document).off("click.autocomplete",b.killerFn)},killSuggestions:function(){var a=this;a.stopKillSuggestions(),a.intervalId=window.setInterval(function(){a.hide(),a.stopKillSuggestions()},300)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var a,b=this,c=b.el.val().length,d=b.element.selectionStart;return"number"==typeof d?d===c:document.selection?(a=document.selection.createRange(),a.moveStart("character",-c),c===a.text.length):!0},onKeyPress:function(a){var b=this;if(!b.disabled&&!b.visible&&a.which===d.DOWN&&b.currentValue)return void b.suggest();if(!b.disabled&&b.visible){switch(a.which){case d.ESC:b.el.val(b.currentValue),b.hide();break;case d.RIGHT:if(b.hint&&b.options.onHint&&b.isCursorAtEnd()){b.selectHint();break}return;case d.TAB:if(b.hint&&b.options.onHint)return void b.selectHint();case d.RETURN:if(-1===b.selectedIndex)return void b.hide();if(b.select(b.selectedIndex),a.which===d.TAB&&b.options.tabDisabled===!1)return;break;case d.UP:b.moveUp();break;case d.DOWN:b.moveDown();break;default:return}a.stopImmediatePropagation(),a.preventDefault()}},onKeyUp:function(a){var b=this;if(!b.disabled){switch(a.which){case d.UP:case d.DOWN:return}clearInterval(b.onChangeInterval),b.currentValue!==b.el.val()&&(b.findBestHint(),b.options.deferRequestBy>0?b.onChangeInterval=setInterval(function(){b.onValueChange()},b.options.deferRequestBy):b.onValueChange())}},onValueChange:function(){var b,c=this;c.selection&&(c.selection=null,(c.options.onInvalidateSelection||a.noop)()),clearInterval(c.onChangeInterval),c.currentValue=c.el.val(),b=c.getQuery(c.currentValue),c.selectedIndex=-1,b.length<c.options.minChars?c.hide():c.getSuggestions(b)},getQuery:function(b){var c,d=this.options.delimiter;return d?(c=b.split(d),a.trim(c[c.length-1])):a.trim(b)},getSuggestionsLocal:function(b){var c=this,d=b.toLowerCase(),e=c.options.lookupFilter;return{suggestions:a.grep(c.options.lookup,function(a){return e(a,b,d)})}},getSuggestions:function(b){var c,d=this,e=d.options,f=e.serviceUrl;if(c=d.isLocal?d.getSuggestionsLocal(b):d.cachedResponse[b],c&&a.isArray(c.suggestions))d.suggestions=c.suggestions,d.suggest();else if(!d.isBadQuery(b)){if(e.params[e.paramName]=b,e.onSearchStart.call(d.element,e.params)===!1)return;a.isFunction(e.serviceUrl)&&(f=e.serviceUrl.call(d.element,b)),null!=this.currentRequest&&this.currentRequest.abort(),this.currentRequest=a.ajax({url:f,data:e.ignoreParams?null:e.params,type:e.type,dataType:e.dataType}).done(function(a){d.processResponse(a,b),e.onSearchComplete.call(d.element,b)})}},isBadQuery:function(a){for(var b=this.badQueries,c=b.length;c--;)if(0===a.indexOf(b[c]))return!0;return!1},hide:function(){var b=this;b.visible=!1,b.selectedIndex=-1,a(b.suggestionsContainer).hide(),b.signalHint(null)},suggest:function(){if(0===this.suggestions.length)return void this.hide();var b,c=this,d=c.options.formatResult,e=c.getQuery(c.currentValue),f=c.classes.suggestion,g=c.classes.selected,h=a(c.suggestionsContainer),i="";a.each(c.suggestions,function(a,b){i+='<div class="'+f+'" data-index="'+a+'">'+d(b,e)+"</div>"}),"auto"===c.options.width&&(b=c.el.outerWidth()-2,h.width(b>0?b:300)),h.html(i).show(),c.visible=!0,c.options.autoSelectFirst&&(c.selectedIndex=0,h.children().first().addClass(g)),c.findBestHint()},findBestHint:function(){var b=this,c=b.el.val().toLowerCase(),d=null;c&&(a.each(b.suggestions,function(a,b){var e=0===b.value.toLowerCase().indexOf(c);return e&&(d=b),!e}),b.signalHint(d))},signalHint:function(b){var c="",d=this;b&&(c=d.currentValue+b.value.substr(d.currentValue.length)),d.hintValue!==c&&(d.hintValue=c,d.hint=b,(this.options.onHint||a.noop)(c))},verifySuggestionsFormat:function(b){return b.length&&"string"==typeof b[0]?a.map(b,function(a){return{value:a,data:null}}):b},processResponse:function(a,b){var c=this,d=c.options,e=d.transformResult(a,b);e.suggestions=c.verifySuggestionsFormat(e.suggestions),d.noCache||(c.cachedResponse[e[d.paramName]]=e,0===e.suggestions.length&&c.badQueries.push(e[d.paramName])),b===c.getQuery(c.currentValue)&&(c.suggestions=e.suggestions,c.suggest())},activate:function(b){var c,d=this,e=d.classes.selected,f=a(d.suggestionsContainer),g=f.children();return f.children("."+e).removeClass(e),d.selectedIndex=b,-1!==d.selectedIndex&&g.length>d.selectedIndex?(c=g.get(d.selectedIndex),a(c).addClass(e),c):null},selectHint:function(){var b=this,c=a.inArray(b.hint,b.suggestions);b.select(c)},select:function(a){var b=this;b.hide(),b.onSelect(a)},moveUp:function(){var b=this;if(-1!==b.selectedIndex)return 0===b.selectedIndex?(a(b.suggestionsContainer).children().first().removeClass(b.classes.selected),b.selectedIndex=-1,b.el.val(b.currentValue),void b.findBestHint()):void b.adjustScroll(b.selectedIndex-1)},moveDown:function(){var a=this;a.selectedIndex!==a.suggestions.length-1&&a.adjustScroll(a.selectedIndex+1)},adjustScroll:function(b){var c,d,e,f=this,g=f.activate(b),h=25;g&&(c=g.offsetTop,d=a(f.suggestionsContainer).scrollTop(),e=d+f.options.maxHeight-h,d>c?a(f.suggestionsContainer).scrollTop(c):c>e&&a(f.suggestionsContainer).scrollTop(c-f.options.maxHeight+h),f.el.val(f.getValue(f.suggestions[b].value)),f.signalHint(null))},onSelect:function(b){var c=this,d=c.options.onSelect,e=c.suggestions[b];c.currentValue=c.getValue(e.value),c.el.val(c.currentValue),c.signalHint(null),c.suggestions=[],c.selection=e,a.isFunction(d)&&d.call(c.element,e)},getValue:function(a){var b,c,d=this,e=d.options.delimiter;return e?(b=d.currentValue,c=b.split(e),1===c.length?a:b.substr(0,b.length-c[c.length-1].length)+a):a},dispose:function(){var b=this;b.el.off(".autocomplete").removeData("autocomplete"),b.disableKillerFn(),a(window).off("resize",b.fixPositionCapture),a(b.suggestionsContainer).remove()}},a.fn.autocomplete=function(c,d){var e="autocomplete";return 0===arguments.length?this.first().data(e):this.each(function(){var f=a(this),g=f.data(e);"string"==typeof c?g&&"function"==typeof g[c]&&g[c](d):(g&&g.dispose&&g.dispose(),g=new b(this,c),f.data(e,g))})}}),function($){function setAutocomplete(a){var b=this;a.each(function(){var a=$(this),c=getEntityByInput.call(b,a),d=getSuggestLinkByEntity.call(b,c),e=getRelatedDataByInput.call(b,a);a.autocomplete({autoSelectBlur:!0,tabDisabled:!1,autoSelectFirst:!0,serviceUrl:d,minChars:1,width:300,delimiter:/(,|;)\s*/,zIndex:9999,deferRequestBy:0,params:e,noCache:!1,onSelect:function(c,d){$(a).val($.trim(c.value.replace(new RegExp("\\(.+","gi"),""))),setResultData.call(b,a,c.value,c.data)},dataType:"json",transformResult:function(a){return{suggestions:$.map(a,function(a){return fullLocation=a.region?a.name+" ("+a.region+")":a.name,{value:fullLocation,data:a.id}})}}})})}function setAutocompleteOptions(a){var b=this;a.each(function(){var a=$(this),c=getEntityByInput.call(b,a),d=getSuggestLinkByEntity.call(b,c),e=getRelatedDataByInput.call(b,a);a.autocomplete().setOptions({serviceUrl:d,params:e})})}function getRelatedDataByInput(a){var b=this,c=a.data("ac-related"),d=a.data("ac-related-data")||{},e="";return c&&$.isEmptyObject(d)&&($.each(c.toString().split(","),function(a,b){e+="[data-ac-related-id="+b+"],"}),$(e.replace(/,$/,""),b).each(function(){var a=$(this),c=a.data("ac-related-name")||a.attr("name"),e=parseInt(a.data("ac-item-id"))||a.val();e?(settings(b).prevKey=c,settings(b).prevValue=e,d[c]=e):d[settings(b).prevKey]=settings(b).prevValue}),a.data("ac-related-data",d)),d}function formatListData(data,acEntity,acListFormat){try{var formatFunc=eval("formatList"+acEntity.ucFirst()+"Item");$.map(data,function(a){return formatFunc(a,acListFormat)})}catch(e){}return data}function formatListCityItem(a,b){var c;switch(c=a.region+(a.area?a.region?" ("+a.area+")":a.area:""),c=(c?c+", ":"")+a.name,b){default:a.label=c,a.value=a.name;break;case"fullValue":a.label=c,a.value=c}return a}function formatListRegionItem(a,b){switch(b){default:a.label=(a.country?a.country+", ":"")+a.name,a.value=a.name}return a}function formatListStreetItem(a,b){switch(b){default:a.label=a.name,a.value=a.name}return a}function selectItem(a,b,c,d,e){setResultData.call(this,a,c.item.label,c.item.id)}function setResultData(a,b,c){var d=a.parent();a.data("ac-item-id",c||""),d.find($(settings(this).resultRawInput)).val(b||a.val()),d.find($(settings(this).resultIdInput)).val(c||""),c&&a.trigger("ac.select.id"),a.trigger("ac.select")}function getEntityByInput(a){return a.is(settings(this).acStreetInput)?"street":a.is(settings(this).acCityInput)?"city":a.is(settings(this).acRegionInput)?"region":a.is(settings(this).acCountryInput)?"country":""}function openList(a){}function closeList(a){}function getSuggestLinkByEntity(a){return settings(this)["suggest"+a.ucFirst()+"Link"]}function settings(a){return $.data(a,"vvAutocomplete")}$.vvAutocomplete={defaults:{acInput:".x-ac-input",acRelatedSelector:".x-ac-related",acStreetInput:"input.x-ac-street",acCityInput:"input.x-ac-city",acRegionInput:"input.x-ac-region",acCountryInput:"input.x-ac-country",resultRawInput:"input.x-ac-result-raw",resultIdInput:"input.x-ac-result-id",suggestCountryLink:"/location/suggest_country",suggestRegionLink:"/location/suggest_region",suggestCityLink:"/location/suggest_city",suggestStreetLink:"/location/suggest_street",clearCacheOnChange:!0,clearCountryDirectly:!1},globals:{prevKey:"",prevValue:"",itemObj:null}},$.fn.extend({vvAutocomplete:function(a){return this.each(function(){a=$.extend({},$.vvAutocomplete.defaults,a),$.data(this,"vvAutocomplete",a);var b=this;setAutocomplete.call(b,$(a.acInput,b)),$(a.acRelatedSelector,b).bind("change ac.select.id",function(){var b=$("[data-ac-related*="+$(this).data("ac-related-id")+"]");a.clearCacheOnChange&&b.data("ac-related-data",null).val("").trigger("change")}),a.clearCountryDirectly&&$(a.acRelatedSelector,b).bind("change",function(){var a=$("[data-ac-related*="+$(".x-country-id").data("ac-related-id")+"]");a.data("ac-related-data",null).val("")}),$(a.acInput,b).change(function(){setResultData.call(b,$(this))}),$(a.acRelatedSelector,b).change(function(){setAutocompleteOptions.call(b,$(a.acInput,b))})})}})}(jQuery),String.prototype.ucFirst=function(){var a=this;return a.length&&(a=a.charAt(0).toUpperCase()+a.slice(1)),a};